{% extends "base.html" %}

{% block content %}

<div class="chat">

  {% if error_message %}
    <p class="error">{{ error_message }}</p>
  {% endif %}

  {% if notice_message %}
    <p class="notice">{{ notice_message }}</p>
  {% endif %}

  <form method="post" action="{% url chaqinterface.ask %}" class="well form-inline">
    {% csrf_token %}
    <p>
      <label for="topics">Topics:</label>
      <a href="#" class="label label-info" title="Click to remove topic">PHP</a>
      <a href="#" class="label label-info" title="Click to remove topic">Security</a>
      <a href="#" class="label label-info" title="Click to remove topic">Database</a>
      <button class="btn">+</button>
    </p>
    <p>
      <label for="question">Input: </label>
      <input type="text" name="question" id="question" placeholder="Ask your questions" required/>
      <input type="submit" name="ask-question" value="Ask" class="btn"/>
    </p>
  </form>

  {% if conversation.status == 'OK' %}
  <p>Q: {{ conversation.question }}</p>
  <p>A: {{ conversation.answer }}</p>
  {% endif %}

  <div class="log">
    {% if conversation_log %}
      {% for conversation in conversation_log %}
          <p>
            <strong>Q:</strong> 
            {{ conversation.question }}
            <span>{{ conversation.timestamp }}</span>
          </p>
          <p>
            <<strong>A:</strong> 
            {{ conversation.answer }}
          </p>
      {% endfor %}
    {% else %}
      <p>No logs available yet&hellip;</p>
    {% endif %}
  </div>
</div>

{% endblock content %}